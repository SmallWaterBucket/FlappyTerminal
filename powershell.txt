";$global:response = ""; $timer = New-Object System.Timers.Timer 100; $timer.AutoReset = $true; Register-ObjectEvent -InputObject $timer -EventName Elapsed -Action { try { $global:response = Invoke-RestMethod "http://flappybird.eu.pythonanywhere.com/$($id)" } catch { $global:response = "ERROR: $($_.Exception.Message)" } } -SourceIdentifier PollEvent; $timer.Start(); while ($true) { [Console]::SetCursorPosition(0, 0); [Console]::SetCursorPosition(0, 0); Write-Host $global:response; if ([Console]::KeyAvailable) { $key = [Console]::ReadKey($true).Key; Invoke-RestMethod "http://flappybird.eu.pythonanywhere.com/jumped/$id" | Out-Null; if ($key -eq 'Q') { break } } }; $timer.Stop(); Unregister-Event -SourceIdentifier PollEvent; $timer.Dispose(); Write-Host "`nExited. Timer stopped and resources cleaned up"
